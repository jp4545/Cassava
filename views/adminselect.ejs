<!DOCTYPE html>
<html>
<head>
<style>
.dropdown {
    position: relative;
    display: inline-block;
    
}

span {
    width: 100%;
    padding: 16px 20px;
    border: none;
    border-radius: 4px;
    background-color: #f1f1f1;



}
.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    padding: 12px 16px;
    z-index: 1;
}


.buttonim {
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;

}
.dropdown:hover .dropdown-content {
    display: block;
}

   

</style>
</head>
<body>
<script type="text/javascript">

              $(".slid").hide();
              $(".regbutton").hide();
              $(".slmail").hide();
              $(".mailbutton").hide();
 $(".regn").click(function(event){   
              $(".slid").show();
              $(".regbutton").show();
              $(".slmail").hide();
              $(".mailbutton").hide();
            }); 
 
  $(".rmail").click(function(event){   
              $(".slid").hide();
              $(".slmail").show();
              $(".mailbutton").show();
              $(".regbutton").hide();
            }); 
 

      $(document).ready(function() {
       
       $(".mailbutton").click(function(event){   
              var txtbox = document.getElementById("mail");
              $.ajax({
                  type: "POST",
                  url: "/fetchmail",
                  data:{ key1: txtbox.value },
                  success: function(docs) {
                   populates(docs);
                },
                error: function(jqXHR, textStatus, err) {
                  alert('text status '+textStatus+', err '+err)
                }
            }); 
            });



   $(".regbutton").click(function(event){   
              searchresult();
            });  

    });
  function searchresult()
{
   var txtbox = document.getElementById("regnum");
             //alert(txtbox.value);               
              $.ajax({
                  type: "POST",
                  url: "/fetchreg",
                  data:{ key: txtbox.value },
                  success: function(docs) {
                   populates(docs);
                },
                error: function(jqXHR, textStatus, err) {
                  alert('text status '+textStatus+', err '+err)
                }
            });
} 

function populates(docs)
{
  $('.mytable tr').not(':first').remove();
      var html = '';
      $.each(docs, function (i) {
          var num=i+1;
          html += '<tr><td>' + num
           + '</td><td>' + eval(JSON.stringify(docs[i].username))
           + '</td><td>' + eval(JSON.stringify(docs[i].name))
           + '</td><td>' + eval(JSON.stringify(docs[i].email))
           + '</td><td>' + eval(JSON.stringify(docs[i].researchtopic))
           + '</td><td>' + eval(JSON.stringify(docs[i].phonenumber))
           + '</td><td>' + eval(JSON.stringify(docs[i].researchsupervisior))
            + '</td><td>' + eval(JSON.stringify(docs[i].supervisioremail))
           /*+ '</td><td>'+stockfile+'</td><td>'+backup+'</td><td>'*/+ '</td></tr>';
        });
  $('.mytable tr').first().after(html);
}





  function fetchall()
{
          
              $.ajax({
                  type: "POST",
                  url: "/viewall",
                  success: function(docs) {
                    populates(docs);
                },
                error: function(jqXHR, textStatus, err) {
                  alert('text status '+textStatus+', err '+err)
                }
            });
}

</script>
<center><h2>Research Scholars Database</h2><center>
<form name="adminsel" method="post">
<div >
  <span> <select name="choice">
   <div class="regn"> <option value="Register Number">Register Number</option></div>
    
    <div class="rmail"><option value="mailid of research scholar">mailid of supervisior</option></div>
    
  </select></span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
    
  <div class="slid">
    
    <p>
<input type="text" id="regnum" name="rgno" placeholder="select by reg number">
        </p>
  </div>
<div class="slmail">
    
    <p>
<input type="email" id="mail" name="mail" placeholder="select by mailid">
        </p>
  </div>
</div>
<div class="regbutton">
<input type="submit" id="searchrg" class="buttonim"  value="Search">
</div>
<div class="mailbutton">
<input type="submit" id="searchmail" class="buttonim"  value="Search">
</div>
<center>
<table id="mytable">
            <tr>
                <th scope="col">s.no</th>
                <th scope="col">Register Number</th>
                <th scope="col">Scholar Name</th>
                <th scope="col">Scholar Email</th>
                 <th scope="col">Research Topic</th>
                <th scope="col">mobile number</th>
                <th scope="col">Research Supervisor</th>
                <th scope="col">Supervisor Email</th>
               </tr>
        </table>
</center>
</form>
</body>
</html>

